<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="icon" href="/favicon.png">
	<link rel="apple-touch-icon" href="/favicon.png">

	<title>Lessons learned by using HTML5 Canvas - ales.io - @alesdotio - Aleš Kocjančič</title>
	<meta name="description" content="Full stack web developer and entrepreneur.">
	<meta name="keywords" content="">
	<meta name="author" content="ales.io - @alesdotio - Aleš Kocjančič">
	<meta property="og:title" content="Lessons learned by using HTML5 Canvas - ales.io - @alesdotio - Aleš Kocjančič">
	<meta property="og:description" content="Full stack web developer and entrepreneur.">
	<meta property="og:image" content="/header.png">
	<meta property="og:image:width" content="2000">
	<meta property="og:image:height" content="860">
	<meta property="og:type" content="website">

	<link rel="stylesheet" type="text/css" href="/styles.css">
	<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-45398053-1', 'ales.io');
	ga('send', 'pageview');
</script>
</head>
<body>

	<header style="background-image: url('/images/header.jpg')" class="min-h-[520px] bg-cover bg-center bg-no-repeat">
		
    <h1 class="text-white text-serif text-2xl">Lessons learned by using HTML5 Canvas</h1>
    <p class="text-white">Mon Nov 04 2013 01:00:00 GMT+0100 (Central European Standard Time)</p>

	</header>


<article class="">
    <h1>Lessons learned by using HTML5 Canvas</h1>
    <p>Recently I had the opportunity to work on a project that makes heavy use of Canvas for drawing and manipulating huge amounts of objects (the project is currently in open beta and can be found on <a href="http://www.fanpictor.com/">www.fanpictor.com</a>). Being my first time using the technology, and not knowing much about it, I had to overcome issues that in retrospect seem pretty obvious. Here is a list of things I learned or wish I knew before starting.</p>
<h4>1. Use a high level framework</h4>
<p>Canvas has a really low-level API, and unless you really have to do something crazy, use a framework. <a href="https://www.google.com/#q=canvas+framework">There's plenty to choose from</a> and the choice really depends on your use case. I opted into using the awesome <a href="http://fabricjs.com/">Fabric.js</a>, because of it's built-in manipulation abilities.</p>
<h4>2. Divide and conquer</h4>
<p>If possible, divide your app in smaller independent parts. Multiple transparent canvases on top of each other is the way to go, when you need to improve performance. A good idea is to use <em>one</em> top canvas to handle all mouse events.</p>
<h4>3. Know the limits</h4>
<p>Experiment with your framework and use case, <em>in advance</em>. There are limitations for both canvas size and number of objects. In my experience, having more than 10,000 objects on canvas was not a viable option, since we also needed to be able to manipulate and animate them. Knowing that, we decided on a different user workflow to work around the limitation.</p>
<h4>4. When possible do it with HTML</h4>
<p>Drawing your whole interface on canvas is not such a good idea. You are better off writing your static UI elements in good ol' HTML/CSS. Interaction between the two is easy.</p>
<h4>5. Animation performance</h4>
<p>Redrawing canvas in a loop or on 'mousemove'? Use <a href="https://developer.mozilla.org/en-US/docs/Web/API/window.requestAnimationFrame">window.requestAnimationFrame()</a>.</p>
<h4>6. Do bulk operations, redraw rarely</h4>
<p>This ones are pretty obvious: bulk-adding objects is faster; postpone redrawing the canvas for as long as possible.</p>
<h4>7. Cache all the things!</h4>
<p>Another obvious one, but check how your framework's caching process works. Despite being an awesome all-around framework Fabric.js unfortunately <a href="https://github.com/kangax/fabric.js/issues/318">does not have any caching support yet</a>.</p>
<h4>8. Know your audience</h4>
<p>This one could apply to web development in general. Keep in mind that canvas performance might be terrible on old and mobile browsers. If you need to support those, good luck!</p>
<p>&nbsp;</p>
<p>In conclusion, yes, canvas has some shortcomings and caveats, but at the end of the day, what web technology doesn't? When you know how to, it's a fantastic tool that can be used to build <a href="http://www.chromeexperiments.com/">some incredible stuff</a>.</p>

</article>

</body>
</html>
